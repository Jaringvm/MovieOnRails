<div class="container mt-4">
  <h1>Upload CSV</h1>

  <% if params[:submitted].nil? %>
    <%= form_with(url: import_file_path, local: true, multipart: true) do |form| %>
      <div class="mb-3">
        <%= form.label :file, "Choose CSV file", class: "form-label" %>
        <%= form.file_field :file, class: "form-control", accept: ".csv" %>
      </div>
      <%= form.submit "Upload CSV", class: "btn btn-primary" %>
    <% end %>
  <% else %>
    <p>To-do: make a form based on DB to map headers</p>
    <%= form_with url:mapped_file_path do |f|  %>
      <% @movie_headers.each do |k, v| %>
        <p>
          <strong><%= f.label k %></strong><br>
          <%= f.select v, @uploaded_headers %>
        </p>
      <% end %>
      <%= f.submit "save mapping", class:"btn btn-primary"%>
    <% end %>
  <% end %>
</div>