<h1>Map your .CSV</h1>



<div class="container mt-4 mb-4">
  <h1>Upload CSV</h1>

  <%= form_with(url: mapping_path, local: true, multipart: false) do |form| %>
    <div class="mb-3">
      <%= form.label :file, "Choose CSV file", class: "form-label" %>
      <%= form.file_field :file, class: "form-control", accept: ".csv" %>
    </div>

    <%= form.submit "Upload CSV", class: "btn btn-primary" %>
  <% end %>

  <% if $file != nil %>
    <%= form_with url:sort_path do |f| %>
      <% @data_struct.each do |key, values| %>
        <div class="d-inline-block w-30 me-2 align-top">
          <h2><%= key %></h2>
          <% values.each do |v| %>
            <p>
              <%= f.label v %><br>
              <%= f.select v, $columns %>
            </p>
          <% end %>
        </div>
      <% end %>
      <%= f.submit %>
    <% end %>
  <% end %>
</div>